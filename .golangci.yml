# https://golangci-lint.run/usage/configuration/
run:
  go: "1.21"
  timeout: 10m
  issues-exit-code: 1
  tests: true
  allow-parallel-runners: true

  # skip-dirs:
  #   - docs # do not include since its auto generated by swaggo

  # by default isn't set. If set we pass it to "go list -mod={option}". From "go help modules":
  # If invoked with -mod=readonly, the go command is disallowed from the implicit
  # automatic updating of go.mod described above. Instead, it fails when any changes
  # to go.mod are needed. This setting is most useful to check that go.mod does
  # not need updates, such as in a continuous integration and testing system.
  # If invoked with -mod=vendor, the go command assumes that the vendor
  # directory holds the correct copies of dependencies and ignores
  # the dependency descriptions in go.mod.
  #modules-download-mode: readonly|release|vendor

# all available settings of specific linters
linters-settings:
  goimports:
    local-prefixes: github.com/drmaples/starter-app
  nakedret:
    max-func-lines: 0
  misspell:
    # Correct spellings using locale preferences for US or UK.
    # Default is to use a neutral variety of English.
    # Setting locale to US will correct the British spelling of 'colour' to 'color'.
    locale: US
    ignore-words:
      - cancelled
      - labelled
      - marshalled
      - marshalling
  gosec:
    excludes:
      - G201 # SQL query construction using format string
  revive:
    # if no particular configuration is provided, revive will behave as go-lint does
    # currently we are only enabling the dot-imports rule
    ignore-generated-header: true
    severity: warning
    rules:
      - name: bare-return
        severity: error
      - name: blank-imports
        severity: error
      - name: dot-imports
        severity: error
      - name: duplicated-imports
        severity: error
      - name: increment-decrement
        severity: error
      - name: unexported-naming
        severity: error
      - name: unreachable-code
        severity: error
      - name: unused-parameter
        severity: error
      # - name: unused-receiver
      #   severity: error
  staticcheck:
    # https://staticcheck.io/docs/options#checks
    checks:
      - "all"
      - "-SA1019" # Using a deprecated function, variable, constant or field
  tagliatelle:
    case:
      use-field-name: true
      rules:
        json: snake

linters:
  disable-all: false
  enable:
    - bodyclose
    - errcheck
    - exportloopref
    - ginkgolinter
    - gofmt
    - goimports
    - gosec
    - govet
    - importas
    - misspell
    - predeclared
    - nakedret
    - reassign
    - revive
    - rowserrcheck
    - sqlclosecheck
    - tagliatelle
    - tenv
    - unconvert
    - wastedassign

issues:
  max-issues-per-linter: 10
  max-same-issues: 10
